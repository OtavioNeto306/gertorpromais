(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function S(){const e=document.getElementById("nav-menu"),t=document.getElementById("nav-toggle"),n=document.getElementById("nav-close");t&&e&&t.addEventListener("click",()=>{e.classList.add("show-menu"),document.body.classList.add("no-scroll")}),n&&e&&n.addEventListener("click",()=>{e.classList.remove("show-menu"),document.body.classList.remove("no-scroll")}),e&&document.querySelectorAll(".nav__link").forEach(s=>s.addEventListener("click",()=>{e.classList.remove("show-menu"),document.body.classList.remove("no-scroll")}))}function x(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){const n=this.getAttribute("href");if(n==="#"||n.startsWith("#!"))return;const s=document.querySelector(n);if(s){t.preventDefault();const o=document.querySelector(".header"),r=o?o.offsetHeight:0,a=s.offsetTop-r;window.scrollTo({top:a,behavior:"smooth"})}})})}function T(){const e=document.getElementById("header");e&&window.addEventListener("scroll",()=>{window.scrollY>=80?e.classList.add("header--scrolled"):e.classList.remove("header--scrolled")})}function B(){const e=document.querySelectorAll(".faq__question");e.forEach(t=>{t.addEventListener("click",()=>{const n=t.getAttribute("aria-expanded")==="true",s=t.nextElementSibling;e.forEach(o=>{o!==t&&(o.setAttribute("aria-expanded","false"),o.nextElementSibling.setAttribute("aria-hidden","true"))}),n?(t.setAttribute("aria-expanded","false"),s.setAttribute("aria-hidden","true")):(t.setAttribute("aria-expanded","true"),s.setAttribute("aria-hidden","false"))})})}function A(){document.querySelectorAll(".btn[data-loading-text]").forEach(e=>{e.addEventListener("click",function(t){if(this.closest("form")&&this.type==="submit"||this.getAttribute("href")&&this.getAttribute("href").startsWith("#"))return;t.preventDefault();const n=this.innerHTML,s=this.dataset.loadingText||"Carregando...";this.classList.add("btn--loading"),this.disabled=!0,this.innerHTML=`<span class="btn__loading-spinner"></span> ${s}`,setTimeout(()=>{this.classList.remove("btn--loading"),this.disabled=!1,this.innerHTML=n,L("Ação simulada com sucesso!","success")},1500)})})}function M(){const e=document.querySelectorAll("[data-animation]");if(!e.length)return;const t=new IntersectionObserver((n,s)=>{n.forEach(o=>{o.isIntersecting&&(o.target.classList.add("animate-in"),s.unobserve(o.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});e.forEach(n=>t.observe(n))}function _(){const e=document.querySelectorAll("img[data-src]");if(e.length)if("IntersectionObserver"in window){const t=new IntersectionObserver((n,s)=>{n.forEach(o=>{if(o.isIntersecting){const r=o.target;r.src=r.dataset.src,r.removeAttribute("data-src"),r.classList.add("lazy-loaded"),t.unobserve(r)}})});e.forEach(n=>t.observe(n))}else e.forEach(t=>{t.src=t.dataset.src,t.removeAttribute("data-src"),t.classList.add("lazy-loaded")})}function L(e,t="info",n=3e3){const s=document.getElementById("toast-container")||E(),o=document.createElement("div");o.className=`toast toast--${t}`,o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive");const r={success:'<i class="fas fa-check-circle"></i>',error:'<i class="fas fa-times-circle"></i>',warning:'<i class="fas fa-exclamation-triangle"></i>',info:'<i class="fas fa-info-circle"></i>'};o.innerHTML=`
    <div class="toast__icon">${r[t]||r.info}</div>
    <div class="toast__message">${e}</div>
    <button class="toast__close-btn" aria-label="Fechar notificação">&times;</button>
  `,s.appendChild(o),o.querySelector(".toast__close-btn").addEventListener("click",()=>{y(o)}),setTimeout(()=>{o.classList.add("toast--enter")},10),setTimeout(()=>{y(o)},n)}function y(e){e.classList.remove("toast--enter"),e.classList.add("toast--exit"),e.addEventListener("transitionend",()=>{e.parentNode&&e.parentNode.removeChild(e);const t=document.getElementById("toast-container");t&&t.hasChildNodes()},{once:!0})}function E(){let e=document.getElementById("toast-container");return e||(e=document.createElement("div"),e.id="toast-container",document.body.appendChild(e)),e}function O(){const e=document.getElementById("newsletter-form");if(!e){const s=document.getElementById("final-cta-form");s&&w(s);return}const t=e.querySelector(".newsletter__input"),n=e.querySelector(".newsletter__button");e.addEventListener("submit",function(s){s.preventDefault();const o=t.value.trim(),r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(h(e),!o){m(e,"Por favor, digite seu e-mail.","error");return}if(!r.test(o)){m(e,"Por favor, digite um e-mail válido.","error");return}n.classList.add("btn--loading"),n.disabled=!0,n.innerHTML='<span class="btn__loading-spinner"></span> Enviando...',setTimeout(()=>{n.classList.remove("btn--loading"),n.disabled=!1,n.innerHTML="Assinar",m(e,"E-mail cadastrado com sucesso! Obrigado.","success"),t.value="";try{const a=JSON.parse(localStorage.getItem("newsletter_subscribers")||"[]");a.push({email:o,date:new Date().toISOString()}),localStorage.setItem("newsletter_subscribers",JSON.stringify(a))}catch(a){console.error("Erro ao salvar no localStorage:",a)}},1500)})}function w(e){if(!e)return;const t=e.querySelector(".btn");e.addEventListener("submit",function(n){n.preventDefault(),h(e);const s=t.innerHTML;t.classList.add("btn--loading"),t.disabled=!0,t.innerHTML='<span class="btn__loading-spinner"></span> Processando...',setTimeout(()=>{t.classList.remove("btn--loading"),t.disabled=!1,t.innerHTML=s,m(e,"Ação simulada! Redirecionando em breve...","success"),console.log("Botão 'Quero Iniciar Gratuitamente' clicado.")},1500)})}function m(e,t,n,s=null){h(e);const o=document.createElement("p");if(o.className=`form-message form-message--${n}`,o.textContent=t,s&&s.parentNode===e)s.parentNode.insertBefore(o,s.nextSibling);else{const r=e.querySelector(".btn");r?e.insertBefore(o,r):e.appendChild(o)}setTimeout(()=>{o.parentNode&&o.remove()},5e3)}function h(e){const t=e.querySelector(".form-message");t&&t.remove()}function C(){const e=document.getElementById("video-carousel");if(!e)return;const t=e.querySelector(".carousel-track"),n=Array.from(t.children),s=e.querySelector(".carousel-button--next"),o=e.querySelector(".carousel-button--prev"),r=document.getElementById("video-modal"),a=document.getElementById("video-modal-iframe"),p=document.getElementById("video-modal-close"),g=document.getElementById("video-modal-overlay");if(!t||!s||!o||!r||!a||!p||!g){console.error("Video carousel elements not found.");return}let c=0,l=3;const v=n.length;function b(){window.innerWidth<=768?l=1:window.innerWidth<=992?l=2:l=3}function d(){if(!n.length)return;const i=getComputedStyle(n[0]),u=n[0].offsetWidth+parseInt(i.marginLeft)+parseInt(i.marginRight);t.style.transform=`translateX(-${c*u}px)`,o.disabled=c===0,s.disabled=c>=v-l}s.addEventListener("click",()=>{c<v-l&&(c++,d())}),o.addEventListener("click",()=>{c>0&&(c--,d())}),n.forEach(i=>{i.addEventListener("click",()=>{const u=i.dataset.videoId;u&&I(u)})});function I(i){a.src=`https://www.youtube.com/embed/${i}?rel=0&autoplay=1`,r.classList.add("active"),document.body.style.overflow="hidden"}function f(){r.classList.remove("active"),a.src="",document.body.style.overflow=""}p.addEventListener("click",f),g.addEventListener("click",f),window.addEventListener("keydown",i=>{i.key==="Escape"&&r.classList.contains("active")&&f()}),window.addEventListener("resize",()=>{b(),d()}),b(),d()}async function q(){const e=[{placeholder:"header-placeholder",path:"partials/header.html"},{placeholder:"hero-placeholder",path:"partials/hero.html"},{placeholder:"presentation-placeholder",path:"partials/presentation.html"},{placeholder:"resources-placeholder",path:"partials/resources.html"},{placeholder:"video-placeholder",path:"partials/video-section.html"},{placeholder:"video-carousel-placeholder",path:"partials/video-carousel.html"},{placeholder:"plans-placeholder",path:"partials/plans.html"},{placeholder:"testimonials-placeholder",path:"partials/testimonials.html"},{placeholder:"faq-placeholder",path:"partials/faq.html"},{placeholder:"final-cta-placeholder",path:"partials/final-cta.html"},{placeholder:"footer-placeholder",path:"partials/footer.html"}];for(const t of e){const n=document.getElementById(t.placeholder);if(n)try{const s=await fetch(t.path);if(!s.ok)throw new Error(`Failed to load ${t.path}: ${s.statusText}`);const o=await s.text();n.innerHTML=o}catch(s){console.error(`Error loading partial ${t.path}:`,s),n.innerHTML='<p style="color:red; text-align:center;">Erro ao carregar esta seção.</p>'}}}document.addEventListener("DOMContentLoaded",async()=>{try{await q(),S(),x(),T(),B(),O();const e=document.getElementById("final-cta-form");e&&w(e),A(),M(),_(),E(),C(),document.body.classList.add("loaded"),console.log("GestorPRO Landing Page carregada e scripts inicializados!"),L("Bem-vindo ao GestorPRO!","info")}catch(e){console.error("Erro ao inicializar a página:",e),document.body.innerHTML='<p style="color:red; text-align:center; font-size: 20px; margin-top: 50px;">Oops! Algo deu errado ao carregar a página. Por favor, tente recarregar.</p>'}});
